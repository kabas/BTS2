"use strict";var btsModule=angular.module("maptestAppApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","uiGmapgoogle-maps"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}]);btsModule.config(["uiGmapGoogleMapApiProvider",function(a){a.configure({key:"AIzaSyDartvWxBRwtQW213XfzXBPSuBn-vn-c1E",v:"3.17",libraries:"weather,geometry,visualization"})}]),angular.module("maptestAppApp").controller("MainCtrl",["$scope","$http","$timeout","$window","$log","uiGmapGoogleMapApi",function(a,b,c,d,e,f){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],a.map={center:{latitude:36.990282103105066,longitude:-122.06149578094482},markers:[],zoom:15},f.then(function(){i()});var g,h=function(){for(var b=0;b<a.map.markers.length;b++)a.map.markers[b].predictionArray=a.map.markers[b].predictions.split(","),"LOOP"===a.map.markers[b].route&&(a.map.markers[b].route=a.map.markers[b].predictionArray[1]<a.map.markers[b].predictionArray[2]||a.map.markers[b].predictionArray[4]<a.map.markers[b].predictionArray[5]||a.map.markers[b].predictionArray[9]<a.map.markers[b].predictionArray[12]||a.map.markers[b].predictionArray[14]<a.map.markers[b].predictionArray[16]||a.map.markers[b].predictionArray[17]<a.map.markers[b].predictionArray[19]||a.map.markers[b].predictionArray[22]<a.map.markers[b].predictionArray[25]||a.map.markers[b].predictionArray[28]<a.map.markers[b].predictionArray[1]?"INNERLOOP":"OUTERLOOP"),a.map.markers[b].icon="/animateTest/images/shuttleIcons/"+a.map.markers[b].route+"busS.png";_.each(a.map.markers,function(b){b.closeClick=function(){b.showWindow=!1,a.$apply()},b.onClicked=function(){}})},i=function(){var e,f,j=0,k=function(){var b=0;j===a.oldBusData.markers.length?(a.map.markers=a.busData.markers,h()):(_.each(a.busData.markers,function(c,d){a.oldBusData.markers[j].id===c.id&&(a.oldBusData.markers[j].latitude!==c.latitude||a.oldBusData.markers[j].longitude!==c.longitude?(o(d),b=1):j++)}),0===b?j++:b=0)},l=100,m=5,n=0,o=function(b){n=0,e=(a.busData.markers[b].latitude-a.oldBusData.markers[j].latitude)/l,f=(a.busData.markers[b].longitude-a.oldBusData.markers[j].longitude)/l,0!==e&&0!==f?p():j++},p=function(){a.map.markers[j].latitude+=e,a.map.markers[j].longitude+=f,a.$apply(),n!==l?(n++,setTimeout(p,m)):(j++,k())};b({method:"GET",url:"http://skynet.soe.ucsc.edu/bts/coord2.json"}).success(function(b){a.busData?a.oldBusData=a.busData:a.map.markers=b.markers,a.busData=b,a.oldBusData?k():h(),g=c(i,3e3),d.onblur=function(){c.cancel(g),d.onBlur=""},d.onfocus=function(){i(),d.onBlur=""}}).error(function(){})}}]),angular.module("maptestAppApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]);